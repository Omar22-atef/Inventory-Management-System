<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Reports</title>

    <!-- Bootstrap 5.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <!-- Custom Style -->
    <link rel="stylesheet" href="../css/ProductReports.css">
</head>
<body>
    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="sidebar-logo">
            <h3>Inventra</h3>
        </div>
        <ul class="sidebar-menu">
            <li class="menu-item">
                <a href="dashboard.html">
                    <i class="bi bi-speedometer2"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="MangeProducts.html">
                    <i class="bi bi-box-seam"></i>
                    <span>Manage Products</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="ManageSuppliers.html">
                    <i class="bi bi-people"></i>
                    <span>Manage Suppliers</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="ProductReports.html">
                    <i class="bi bi-bar-chart"></i>
                    <span>Reporting</span>
                </a>
            </li>
            
            <li class="menu-item">
                <a href="stockmang.html">
                    <i class="bi bi-bar-chart"></i>
                    <span>Stock Management</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="settings.html">
                    <i class="bi bi-gear"></i>
                    <span>Settings</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="../Home.html">
                    <i class="bi bi-box-arrow-right"></i>
                    <span>Logout</span>
                </a>
            </li>
        </ul>

    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <!-- TOPBAR -->
        <nav class="dashboard-header d-flex align-items-center justify-content-between">
            <div>
                <h5 class="fw-bold mb-1">Welcome Username</h5>
                <small class="text-muted">user@gmail.com</small>
            </div>

            <div class="search-box">
                <input type="text" class="form-control" placeholder="Search...">
                <i class="bi bi-search search-icon"></i>
            </div>

            <div class="notification">
                <i class="bi bi-bell"></i>
            </div>
        </nav>

        <!-- PAGE CONTENT -->
        <section class="reports-page">
            <!-- Big button: generate ALL reports -->
            <div class="reports-header">
                <div>
                    <h5 class="mb-1">Manage Product Reports</h5>
                    <p class="text-muted mb-0">
                        Choose a specific product or generate a full report for your entire inventory.
                    </p>
                </div>

                <button id="generateFullReport" class="btn btn-primary btn-lg btn-generate-all">
                    <i class="bi bi-file-earmark-spreadsheet me-2"></i>
                    Generate full Report
                </button>
            </div>

            <!-- Filters row -->
            <div class="reports-filters">
                <div class="filter-group">
                    <label for="report-type-filter">Report Type</label>
                    <select id="report-type-filter" class="form-select">
                        <option value="all">All types</option>
                        <option value="stock">Stock status</option>
                        <option value="sales">Sales performance</option>
                        <option value="valuation">Inventory valuation</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="status-filter">Stock Status</label>
                    <select id="status-filter" class="form-select">
                        <option value="all">All</option>
                        <option value="low">Low stock</option>
                        <option value="out">Out of stock</option>
                        <option value="normal">Normal</option>
                    </select>
                </div>
            </div>
            <!-- Sales & Inventory Reports -->

       <div class="report-generator p-4 mb-5 border rounded bg-white">

    <h5 class="fw-bold mb-3">Generate Custom Report</h5>

    <div class="row g-3">

        <!-- Report Type -->
        <div class="col-md-3">
            <label class="form-label">Select Report Type</label>
            <select id="reportType" class="form-select">
                <option value="">-- Choose Report --</option>
                <option value="monthly">Monthly Report</option>
                <option value="weekly">Weekly Report</option>
                <option value="input">Product Input</option>
                <option value="output">Product Output</option>
                <option value="sales">Sales Report (Full Info)</option>
            </select>
        </div>

        <!-- From Date -->
        <div class="col-md-2">
            <label class="form-label">From</label>
            <input type="date" id="reportDateFrom" class="form-control">
        </div>

        <!-- To Date -->
        <div class="col-md-2">
            <label class="form-label">To</label>
            <input type="date" id="reportDateTo" class="form-control">
        </div>

    
        <!-- Button -->
        <div class="col-md-3 d-flex align-items-end">
            <button class="btn btn-primary w-100" id="generateReport">
                Generate
            </button>
        </div>
    </div>

    <!-- Report Preview -->
    <div id="reportPreview" class="border rounded p-4 mt-4 d-none bg-white shadow-sm">
        
        <div class="d-flex justify-content-between">
            <h6 class="fw-bold">Report Preview</h6>
            <small id="reportMeta" class="text-muted">No report yet</small>
        </div>

        <div id="reportContent" class="mt-3">
            <p class="text-muted">Generated report will appear here.</p>
        </div>

        <!-- Charts row -->
        <div class="row mt-4 g-3" id="chartsRow" style="display:none">
            <div class="col-md-4">
                <div class="card p-3">
                    <h6 class="card-title">Stock Distribution</h6>
                    <canvas id="chartStockDistribution" height="200"></canvas>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card p-3">
                    <h6 class="card-title">Product Distribution</h6>
                    <canvas id="chartProductDistribution" height="200"></canvas>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card p-3">
                    <h6 class="card-title">Profit Distribution</h6>
                    <canvas id="chartProfitDistribution" height="200"></canvas>
                </div>
            </div>
        </div>

        <!-- Out of stock alerts -->
        <div id="outStockAlerts" class="mt-4" style="display:none">
            <h6 class="fw-bold text-danger">Out-of-Stock Products</h6>
            <div class="table-responsive">
                <table class="table table-sm table-bordered" id="outStockTable">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Supplier</th>
                            <th>Stock</th>
                            <th>Reorder Threshold</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Low stock alerts -->
        <div id="lowStockAlerts" class="mt-4" style="display:none">
            <h6 class="fw-bold text-warning">Low Stock Products</h6>
            <div class="table-responsive">
                <table class="table table-sm table-bordered" id="lowStockTable">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Supplier</th>
                            <th>Stock</th>
                            <th>Reorder Threshold</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="mt-3">
            <button id="downloadPdf" class="btn btn-success">Download PDF</button>
            <button id="exportExcel" class="btn btn-outline-secondary ms-2">Export Excel</button>
            <button class="btn btn-outline-dark ms-2" onclick="window.print()">Print</button>
        </div>

    </div>

</div>


            <!-- Products in cards -->
            <div class="products-grid">
                <!-- Example card 1 -->
                <article class="product-card" data-name="Sample Product A" data-category="Category A">
                    <div class="product-image">
                        <!-- Replace src with your product image path -->
                        <img src="https://via.placeholder.com/140x100?text=Product" alt="Sample Product A">
                    </div>

                    <div class="product-body">
                        <h6 class="product-name">Sample Product A</h6>
                        <p class="product-meta">ID: #1001 路 Category A</p>
                        <p class="product-stats">
                            In Stock: <span>120</span> 路 Price: <span>$15.99</span>
                        </p>
                    </div>

                    <div class="product-actions">
                        <button class="btn btn-outline-primary btn-sm">
                            <i class="bi bi-file-earmark-bar-graph me-1"></i>
                            Generate Report
                        </button>
                        <button class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-eye me-1"></i>
                            View Last Report
                        </button>
                    </div>
                </article>

                <!-- Example card 2 -->
                <article class="product-card" data-name="Sample Product B" data-category="Category B">
                    <div class="product-image">
                        <img src="https://via.placeholder.com/140x100?text=Product" alt="Sample Product B">
                    </div>

                    <div class="product-body">
                        <h6 class="product-name">Sample Product B</h6>
                        <p class="product-meta">ID: #1002 路 Category B</p>
                        <p class="product-stats">
                            In Stock: <span class="low-stock">8</span> 路 Price: <span>$39.99</span>
                        </p>
                    </div>

                    <div class="product-actions">
                        <button class="btn btn-outline-primary btn-sm">
                            <i class="bi bi-file-earmark-bar-graph me-1"></i>
                            Generate Report
                        </button>
                        <button class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-eye me-1"></i>
                            View Last Report
                        </button>
                    </div>
                </article>

                <!-- Add more product cards dynamically later -->
            </div>

            <!-- No results state -->
            <div class="no-results d-none" id="no-results">
                <i class="bi bi-emoji-frown"></i>
                <p>No products found. Try changing the search or filters.</p>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/ProductReports.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
</body>
</html>
